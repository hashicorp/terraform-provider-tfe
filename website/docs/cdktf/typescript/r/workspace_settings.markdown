---
layout: "tfe"
page_title: "Terraform Enterprise: tfe_workspace_setting"
description: |-
  Manages workspace settings.
---


<!-- Please do not edit this file, it is generated. -->
# tfe_workspace_settings

~> **NOTE:** Manages or reads execution mode and agent pool settings for a workspace. This also interacts with the organization's default values for several settings, which can be managed with [tfe_organization_default_settings](organization_default_settings.html). If other resources need to identify whether a setting is a default or an explicit value set for the workspace, you can refer to the read-only `overwrites` argument.

~> **NOTE:** This resource manages values that can alternatively be managed by the  `tfeWorkspace` resource. You should not attempt to manage the same property on both resources which could cause a permanent drift. Example properties available on both resources: `description`, `tags`, `autoApply`, etc.

## Example Usage

Basic usage:

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as tfe from "./.gen/providers/tfe";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const tfeOrganizationTestOrganization = new tfe.organization.Organization(
      this,
      "test-organization",
      {
        email: "admin@company.com",
        name: "my-org-name",
      }
    );
    const tfeWorkspaceTest = new tfe.workspace.Workspace(this, "test", {
      name: "my-workspace-name",
      organization: cdktf.Token.asString(tfeOrganizationTestOrganization.name),
    });
    new tfe.workspaceSettings.WorkspaceSettings(this, "test-settings", {
      executionMode: "local",
      workspaceId: cdktf.Token.asString(tfeWorkspaceTest.id),
    });
  }
}

```

With `executionMode` of `agent`:

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as tfe from "./.gen/providers/tfe";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const tfeOrganizationTestOrganization = new tfe.organization.Organization(
      this,
      "test-organization",
      {
        email: "admin@company.com",
        name: "my-org-name",
      }
    );
    const tfeWorkspaceTest = new tfe.workspace.Workspace(this, "test", {
      name: "my-workspace-name",
      organization: cdktf.Token.asString(tfeOrganizationTestOrganization.name),
    });
    const tfeAgentPoolTestAgentPool = new tfe.agentPool.AgentPool(
      this,
      "test-agent-pool",
      {
        name: "my-agent-pool-name",
        organization: cdktf.Token.asString(
          tfeOrganizationTestOrganization.name
        ),
      }
    );
    const tfeAgentPoolAllowedWorkspacesTest =
      new tfe.agentPoolAllowedWorkspaces.AgentPoolAllowedWorkspaces(
        this,
        "test_3",
        {
          agentPoolId: cdktf.Token.asString(tfeAgentPoolTestAgentPool.id),
          allowedWorkspaceIds: [cdktf.Token.asString(tfeWorkspaceTest.id)],
        }
      );
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    tfeAgentPoolAllowedWorkspacesTest.overrideLogicalId("test");
    new tfe.workspaceSettings.WorkspaceSettings(this, "test-settings", {
      agentPoolId: cdktf.Token.asString(
        tfeAgentPoolAllowedWorkspacesTest.agentPoolId
      ),
      executionMode: "agent",
      workspaceId: cdktf.Token.asString(tfeWorkspaceTest.id),
    });
  }
}

```

Using `remoteStateConsumerIds`:

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as tfe from "./.gen/providers/tfe";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const tfeWorkspaceTestForEachIterator = cdktf.TerraformIterator.fromList(
      cdktf.Token.asAny(cdktf.Fn.toset(["qa", "production"]))
    );
    const tfeWorkspaceTest = new tfe.workspace.Workspace(this, "test", {
      name: "${" + tfeWorkspaceTestForEachIterator.value + "}-test",
      forEach: tfeWorkspaceTestForEachIterator,
    });
    /*In most cases loops should be handled in the programming language context and 
    not inside of the Terraform context. If you are looping over something external, e.g. a variable or a file input
    you should consider using a for loop. If you are looping over something only known to Terraform, e.g. a result of a data source
    you need to keep this like it is.*/
    const tfeWorkspaceSettingsTestSettingsForEachIterator =
      cdktf.TerraformIterator.fromList(
        cdktf.Token.asAny(cdktf.Fn.toset(["qa", "production"]))
      );
    new tfe.workspaceSettings.WorkspaceSettings(this, "test-settings", {
      globalRemoteState: false,
      remoteStateConsumerIds: cdktf.Token.asList(
        cdktf.Fn.toset(
          cdktf.Fn.compact(
            cdktf.Token.asList([
              cdktf.conditional(
                cdktf.Op.eq(
                  tfeWorkspaceSettingsTestSettingsForEachIterator.value,
                  "production"
                ),
                cdktf.propertyAccess(tfeWorkspaceTest, ['"qa"', "id"]),
                ""
              ),
            ])
          )
        )
      ),
      workspaceId: cdktf.Token.asString(
        cdktf.propertyAccess(
          cdktf.propertyAccess(tfeWorkspaceTest, [
            tfeWorkspaceSettingsTestSettingsForEachIterator.value,
          ]),
          ["id"]
        )
      ),
      forEach: tfeWorkspaceSettingsTestSettingsForEachIterator,
    });
  }
}

```

This resource may be used as a data source when no optional arguments are defined:

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as tfe from "./.gen/providers/tfe";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const dataTfeWorkspaceTest = new tfe.dataTfeWorkspace.DataTfeWorkspace(
      this,
      "test",
      {
        name: "my-workspace-name",
        organization: "my-org-name",
      }
    );
    const tfeWorkspaceSettingsTest =
      new tfe.workspaceSettings.WorkspaceSettings(this, "test_1", {
        workspaceId: cdktf.Token.asString(dataTfeWorkspaceTest.id),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    tfeWorkspaceSettingsTest.overrideLogicalId("test");
    new cdktf.TerraformOutput(this, "workspace-explicit-local-execution", {
      value: cdktf.Fn.alltrue(
        cdktf.Token.asAny([
          cdktf.Op.eq(tfeWorkspaceSettingsTest.executionMode, "local"),
          cdktf.propertyAccess(tfeWorkspaceSettingsTest.overwrites, [
            "0",
            '"execution_mode"',
          ]),
        ])
      ),
    });
  }
}

```

This resource can be used to self manage a workspace created from `terraform init` and a cloud block:

```typescript
import * as constructs from "constructs";
import * as cdktf from "cdktf";
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import * as tfe from "./.gen/providers/tfe";
class MyConvertedCode extends cdktf.TerraformStack {
  constructor(scope: constructs.Construct, name: string) {
    super(scope, name);
    const dataTfeWorkspaceSelf = new tfe.dataTfeWorkspace.DataTfeWorkspace(
      this,
      "self",
      {
        name: "self-managed",
        organization: "foo",
      }
    );
    const tfeWorkspaceSettingsSelf =
      new tfe.workspaceSettings.WorkspaceSettings(this, "self_1", {
        assessmentsEnabled: true,
        tags: {
          prod: "true",
        },
        workspaceId: cdktf.Token.asString(dataTfeWorkspaceSelf.id),
      });
    /*This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.*/
    tfeWorkspaceSettingsSelf.overrideLogicalId("self");
  }
}

```

## Argument Reference

The following arguments are supported:

* `workspaceId` - (Required) ID of the workspace.
* `agentPoolId` - (Optional) The ID of an agent pool to assign to the workspace. Requires `executionMode`
  to be set to `agent`. This value _must not_ be provided if `executionMode` is set to any other value.
* `executionMode` - (Optional) Which [execution mode](https://developer.hashicorp.com/terraform/cloud-docs/workspaces/settings#execution-mode)
  to use. Using HCP Terraform, valid values are `remote`, `local` or `agent`. When set to `local`, the workspace will be used for state storage only. **Important:** If you omit this attribute, the resource configures the workspace to use your organization's default execution mode (which in turn defaults to `remote`), removing any explicit value that might have previously been set for the workspace.
* `globalRemoteState` - (Optional) Whether the workspace allows all workspaces in the organization to access its state data during runs. If false, then only specifically approved workspaces can access its state (`remoteStateConsumerIds`). By default, HashiCorp recommends you do not allow other workspaces to access their state. We recommend that you follow the principle of least privilege and only enable state access between workspaces that specifically need information from each other.
* `remoteStateConsumerIds` - (Optional) The set of workspace IDs set as explicit remote state consumers for the given workspace. To set this attribute, global_remote_state must be false.
* `autoApply` - (Optional) Whether to automatically apply changes when a Terraform plan is successful. Defaults to `false`.
* `assessmentsEnabled` - (Optional) Whether to regularly run health assessments such as drift detection on the workspace. Defaults to `false`.
* `description` - (Optional) A description for the workspace.
* `tags` - (Optional) A map of key value tags for this workspace.


## Attributes Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The workspace ID.
* `overwrites` - Can be used to check whether a setting is currently inheriting its value from another resource.
  - `executionMode` - Set to `true` if the execution mode of the workspace is being determined by the setting on the workspace itself. It will be `false` if the execution mode is inherited from another resource (e.g. the organization's default execution mode)
  - `agentPool` - Set to `true` if the agent pool of the workspace is being determined by the setting on the workspace itself. It will be `false` if the agent pool is inherited from another resource (e.g. the organization's default agent pool)
* `effectiveTags` - A map of key value tags for this workspace, including any tags inherited from the parent project.

## Import

Workspaces can be imported; use `<WORKSPACE ID>` or `<ORGANIZATION NAME>/<WORKSPACE NAME>` as the
import ID. For example:

```shell
terraform import tfe_workspace_settings.test ws-CH5in3chf8RJjrVd
```

```shell
terraform import tfe_workspace_settings.test my-org-name/my-wkspace-name
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-f1d216f1370b1d9132b01fb3aa83be95a84df918dc873a73de20e2c851d5dc85 -->