---
layout: "tfe"
page_title: "Terraform Enterprise: tfe_stack"
description: |-
  Manages Stacks.
---


<!-- Please do not edit this file, it is generated. -->
# tfe_stack

Defines a Stack resource.

~> **NOTE:** Stacks support in the hashicorp/tfe provider is currently available on a pre-release basis and should be considered beta software and subject to change. One notable aspect of this resource is that a stack may not be destroyed until all resources within its deployments have been destroyed.

## Example Usage

### Create a stack with a VCS repository:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { DataTfeAgentPool } from "./.gen/providers/tfe/data-tfe-agent-pool";
import { DataTfeOrganization } from "./.gen/providers/tfe/data-tfe-organization";
import { OauthClient } from "./.gen/providers/tfe/oauth-client";
import { Stack } from "./.gen/providers/tfe/stack";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    const test = new OauthClient(this, "test", {
      apiUrl: "https://api.github.com",
      httpUrl: "https://github.com",
      oauthToken: githubToken.stringValue,
      organization: "my-example-org",
      serviceProvider: "github",
    });
    const agentPool = new DataTfeAgentPool(this, "agent-pool", {
      name: "my-example-agent-pool",
      organization: organization.name,
    });
    const dataTfeOrganizationOrganization = new DataTfeOrganization(
      this,
      "organization",
      {
        name: "my-example-org",
      }
    );
    new Stack(this, "test-stack", {
      agentPoolId: Token.asString(agentPool.id),
      description:
        "A Terraform Stack using two components with two environments",
      name: "my-stack",
      projectId: Token.asString(
        dataTfeOrganizationOrganization.defaultProjectId
      ),
      vcsRepo: [
        {
          branch: "main",
          identifier: "my-github-org/stack-repo",
          oauthTokenId: test.oauthTokenId,
        },
      ],
    });
  }
}

```

### Create a stack without a VCS repository:

```typescript
// DO NOT EDIT. Code generated by 'cdktf convert' - Please report bugs at https://cdk.tf/bug
import { Construct } from "constructs";
import { Token, TerraformStack } from "cdktf";
/*
 * Provider bindings are generated by running `cdktf get`.
 * See https://cdk.tf/provider-generation for more details.
 */
import { DataTfeOrganization } from "./.gen/providers/tfe/data-tfe-organization";
import { OauthClient } from "./.gen/providers/tfe/oauth-client";
import { Stack } from "./.gen/providers/tfe/stack";
class MyConvertedCode extends TerraformStack {
  constructor(scope: Construct, name: string) {
    super(scope, name);
    new OauthClient(this, "test", {
      apiUrl: "https://api.github.com",
      httpUrl: "https://github.com",
      oauthToken: githubToken.stringValue,
      organization: "my-example-org",
      serviceProvider: "github",
    });
    const organization = new DataTfeOrganization(this, "organization", {
      name: "my-example-org",
    });
    new Stack(this, "test-stack", {
      description:
        "A Terraform Stack using two components with two environments",
      name: "my-stack",
      projectId: Token.asString(organization.defaultProjectId),
    });
  }
}

```


## Argument Reference

The following arguments are supported:

* `name` - (Required) Name of the stack.
* `projectId` - (Required) ID of the project where the stack should be created.
* `agentPoolId` - (Optional) The ID of an agent pool to assign to the stack.
* `vcsRepo` - (Optional) Settings for the stack's VCS repository.
* `description` - (Optional) Description of the stack
<!--
NOTE: This is a proposed schema for allowing force-delete actions on a stack. Force delete is not implemented yet so I've commented it out for now.

* `force_delete` - (Optional) If this argument is true, the stack will be deleted during destroy plans even if it contains deployments that have managed resources. You may need to apply this change to the stack before running terraform destroy. Without this argument, all resources managed by stacks deployments need to be destroyed before the stack may be destroyed.-->

The `vcsRepo` block supports:

* `identifier` - (Required) A reference to your VCS repository in the format `<vcs organization>/<repository>` where `<vcs organization>` and `<repository>` refer to the organization and repository in your VCS provider. The format for Azure DevOps is `<ado organization>/<ado project>/_git/<ado repository>`.
* `branch` - (Optional) The repository branch that Terraform will execute from. This defaults to the repository's default branch (e.g. main).
* `githubAppInstallationId` - (Optional) The installation id of the Github App. This conflicts with `oauthTokenId` and can only be used if `oauthTokenId` is not used.
* `oauthTokenId` - (Optional) The VCS Connection (OAuth Connection + Token) to use. This ID can be obtained from a `tfe_oauth_client` resource. This conflicts with `githubAppInstallationId` and can only be used if `githubAppInstallationId` is not used.

## Attributes Reference

* `id` - The stack ID.
* `deploymentNames` - The set of deployment names used in the last configuration for this stack. This attribute will be empty when the resource is created and will remain empty until a configuration is fetched.

## Import

Stacks can be imported by ID, which can be found on the stack's settings tab in the UI

Example:

```shell
terraform import tfe_stack.test-stack st-9cs9Vf6Z49Zzrk1t
```

<!-- cache-key: cdktf-0.20.8 input-2b2bb309b6efaa099d7b361bc32ece1557b0e8d6fcf6cc0f0b796dadd83ce93b -->