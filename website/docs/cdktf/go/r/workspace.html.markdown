---
layout: "tfe"
page_title: "Terraform Enterprise: tfe_workspace"
description: |-
  Manages workspaces.
---

# tfe_workspace

Provides a workspace resource.

~> **NOTE:** Using `GlobalRemoteState` or `RemoteStateConsumerIds` requires using the provider with Terraform Cloud or an instance of Terraform Enterprise at least as recent as v202104-1.

## Example Usage

Basic usage:

```go
import constructs "github.com/aws/constructs-go/constructs"
import "github.com/hashicorp/terraform-cdk-go/cdktf"
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import "github.com/aws-samples/dummy/gen/providers/tfe/organization"
import "github.com/aws-samples/dummy/gen/providers/tfe/workspace"
type myConvertedCode struct {
	terraformStack
}

func newMyConvertedCode(scope construct, name *string) *myConvertedCode {
	this := &myConvertedCode{}
	cdktf.NewTerraformStack_Override(this, scope, name)
	tfeOrganizationTestOrganization := organization.NewOrganization(this, jsii.String("test-organization"), &organizationConfig{
		email: jsii.String("admin@company.com"),
		name: jsii.String("my-org-name"),
	})
	workspace.NewWorkspace(this, jsii.String("test"), &workspaceConfig{
		name: jsii.String("my-workspace-name"),
		organization: cdktf.*token_AsString(tfeOrganizationTestOrganization.name),
		tagNames: []*string{
			jsii.String("test"),
			jsii.String("app"),
		},
	})
	return this
}
```

With `ExecutionMode` of `Agent`:

```go
import constructs "github.com/aws/constructs-go/constructs"
import "github.com/hashicorp/terraform-cdk-go/cdktf"
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import "github.com/aws-samples/dummy/gen/providers/tfe/organization"
import "github.com/aws-samples/dummy/gen/providers/tfe/agentPool"
import "github.com/aws-samples/dummy/gen/providers/tfe/workspace"
type myConvertedCode struct {
	terraformStack
}

func newMyConvertedCode(scope construct, name *string) *myConvertedCode {
	this := &myConvertedCode{}
	cdktf.NewTerraformStack_Override(this, scope, name)
	tfeOrganizationTestOrganization := organization.NewOrganization(this, jsii.String("test-organization"), &organizationConfig{
		email: jsii.String("admin@company.com"),
		name: jsii.String("my-org-name"),
	})
	tfeAgentPoolTestAgentPool := agentPool.NewAgentPool(this, jsii.String("test-agent-pool"), &agentPoolConfig{
		name: jsii.String("my-agent-pool-name"),
		organization: cdktf.*token_AsString(tfeOrganizationTestOrganization.name),
	})
	workspace.NewWorkspace(this, jsii.String("test"), &workspaceConfig{
		agentPoolId: cdktf.*token_*AsString(tfeAgentPoolTestAgentPool.id),
		executionMode: jsii.String("agent"),
		name: jsii.String("my-workspace-name"),
		organization: cdktf.*token_*AsString(tfeOrganizationTestOrganization.name),
	})
	return this
}
```

## Argument Reference

The following arguments are supported:

* `Name` - (Required) Name of the workspace.
* `Organization` - (Optional) Name of the organization. If omitted, organization must be defined in the provider config.
* `Description` - (Optional) A description for the workspace.
* `AgentPoolId` - (Optional) The ID of an agent pool to assign to the workspace. Requires `ExecutionMode`
  to be set to `Agent`. This value _must not_ be provided if `ExecutionMode` is set to any other value or if `Operations` is
  provided.
* `AllowDestroyPlan` - (Optional) Whether destroy plans can be queued on the workspace.
* `AutoApply` - (Optional) Whether to automatically apply changes when a
  Terraform plan is successful. Defaults to `False`.
* `ExecutionMode` - (Optional) Which [execution mode](https://developer.hashicorp.com/terraform/cloud-docs/workspaces/settings#execution-mode)
  to use. Using Terraform Cloud, valid values are `Remote`, `Local` or`Agent`.
  Defaults to `Remote`. Using Terraform Enterprise, only `Remote`and `Local`
  execution modes are valid.  When set to `Local`, the workspace will be used
  for state storage only. This value _must not_ be provided if `Operations`
  is provided.
* `AssessmentsEnabled` - (Optional) Whether to regularly run health assessments such as drift detection on the workspace. Defaults to `False`.
* `FileTriggersEnabled` - (Optional) Whether to filter runs based on the changed files
  in a VCS push. Defaults to `True`. If enabled, the working directory and
  trigger prefixes describe a set of paths which must contain changes for a
  VCS push to trigger a run. If disabled, any push will trigger a run.
* `GlobalRemoteState` - (Optional) Whether the workspace allows all workspaces in the organization to access its state data during runs. If false, then only specifically approved workspaces can access its state (`RemoteStateConsumerIds`).
* `RemoteStateConsumerIds` - (Optional) The set of workspace IDs set as explicit remote state consumers for the given workspace.
* `Operations` - **Deprecated** Whether to use remote execution mode.
  Defaults to `True`. When set to `False`, the workspace will be used for
  state storage only. This value _must not_ be provided if `ExecutionMode` is
  provided.
* `ProjectId` - (Optional) ID of the project where the workspace should be created.
* `QueueAllRuns` - (Optional) Whether the workspace should start
  automatically performing runs immediately after its creation. Defaults to
  `True`. When set to `False`, runs triggered by a webhook (such as a commit
  in VCS) will not be queued until at least one run has been manually queued.
  **Note:** This default differs from the Terraform Cloud API default, which
  is `False`. The provider uses `True` as any workspace provisioned with
  `False` would need to then have a run manually queued out-of-band before
  accepting webhooks.
* `SourceName` - (Optional) A friendly name for the application or client
   creating this workspace. If set, this will be displayed on the workspace as
   "Created via <SOURCE NAME>".
   Requires `SourceUrl` to also be set.
* `SourceUrl` - (Optional) A URL for the application or client creating this
   workspace. This can be the URL of a related resource in another app, or a
   link to documentation or other info about the client.
   Requires `SourceName` to also be set.
   **Note:** The API does not (currently) allow this to be updated after a
   workspace has been created, so modifying this value will result in the
   workspace being replaced. To disable this, use an [ignore changes](https://developer.hashicorp.com/terraform/language/meta-arguments/lifecycle#ignore_changes) lifecycle meta-argument
* `SpeculativeEnabled` - (Optional) Whether this workspace allows speculative
  plans. Defaults to `True`. Setting this to `False` prevents Terraform Cloud
  or the Terraform Enterprise instance from running plans on pull requests,
  which can improve security if the VCS repository is public or includes
  untrusted contributors.
* `StructuredRunOutputEnabled` - (Optional) Whether this workspace should
  show output from Terraform runs using the enhanced UI when available.
  Defaults to `True`. Setting this to `False` ensures that all runs in this
  workspace will display their output as text logs.
* `SshKeyId` - (Optional) The ID of an SSH key to assign to the workspace.
* `TagNames` - (Optional) A list of tag names for this workspace. Note that tags must only contain lowercase letters, numbers, colons, or hyphens.
* `TerraformVersion` - (Optional) The version of Terraform to use for this
  workspace. This can be either an exact version or a
  [version constraint](https://developer.hashicorp.com/terraform/language/expressions/version-constraints)
  (like `~> 1.0.0`); if you specify a constraint, the workspace will always use
  the newest release that meets that constraint. Defaults to the latest
  available version.
* `TriggerPrefixes` - (Optional) List of repository-root-relative paths which describe all locations
  to be tracked for changes.
* `TriggerPatterns` - (Optional) List of [glob patterns](https://developer.hashicorp.com/terraform/cloud-docs/workspaces/settings/vcs#glob-patterns-for-automatic-run-triggering) that describe the files Terraform Cloud monitors for changes. Trigger patterns are always appended to the root directory of the repository. Mutually exclusive with `TriggerPrefixes`.
* `WorkingDirectory` - (Optional) A relative path that Terraform will execute
  within.  Defaults to the root of your repository.
* `VcsRepo` - (Optional) Settings for the workspace's VCS repository, enabling the [UI/VCS-driven run workflow](https://developer.hashicorp.com/terraform/cloud-docs/run/ui).
  Omit this argument to utilize the [CLI-driven](https://developer.hashicorp.com/terraform/cloud-docs/run/cli) and [API-driven](https://developer.hashicorp.com/terraform/cloud-docs/run/api)
  workflows, where runs are not driven by webhooks on your VCS provider.
* `ForceDelete` - (Optional) If this attribute is present on a workspace that is being deleted through the provider, it will use the existing force delete API. If this attribute is not present or false it will safe delete the workspace.

The `VcsRepo` block supports:

* `Identifier` - (Required) A reference to your VCS repository in the format
  `<vcs organization>/<repository>` where `<vcs organization>` and `<repository>` refer to the organization and repository
  in your VCS provider. The format for Azure DevOps is `<ado organization>/<ado project>/_git/<ado repository>`.
* `Branch` - (Optional) The repository branch that Terraform will execute from.
  This defaults to the repository's default branch (e.g. main).
* `IngressSubmodules` - (Optional) Whether submodules should be fetched when
  cloning the VCS repository. Defaults to `False`.
* `OauthTokenId` - (Optional) The VCS Connection (OAuth Connection + Token) to use.
  This ID can be obtained from a `TfeOauthClient` resource. This conflicts with `GithubAppInstallationId` and can only be used if `GithubAppInstallationId` is not used.
* `GithubAppInstallationId` - (Optional) The installation id of the Github App. This conflicts with `OauthTokenId` and can only be used if `OauthTokenId` is not used. 
* `TagsRegex` - (Optional) A regular expression used to trigger a Workspace run for matching Git tags. This option conflicts with `TriggerPatterns` and `TriggerPrefixes`. Should only set this value if the former is not being used.

## Attributes Reference

In addition to all arguments above, the following attributes are exported:

* `Id` - The workspace ID.
* `ResourceCount` - The number of resources managed by the workspace.
* `HtmlUrl` - The URL to the browsable HTML overview of the workspace

## Import

Workspaces can be imported; use `<WORKSPACE ID>` or `<ORGANIZATION NAME>/<WORKSPACE NAME>` as the
import ID. For example:

```shell
terraform import tfe_workspace.test ws-CH5in3chf8RJjrVd
```

```shell
terraform import tfe_workspace.test my-org-name/my-wkspace-name
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-de112f4c52db39d25f8b816c1c51371daa657d8ca222b05af6488fed41372ef3 -->