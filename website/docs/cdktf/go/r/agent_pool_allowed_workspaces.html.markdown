---
layout: "tfe"
page_title: "Terraform Enterprise: tfe_agent_pool_allowed_workspaces"
description: |-
  Manages allowed workspaces on agent pools
---


<!-- Please do not edit this file, it is generated. -->
# tfe_agent_pool_allowed_workspaces

Adds and removes allowed workspaces on an agent pool.

~> **NOTE:** This resource requires using the provider with HCP Terraform and a HCP Terraform
for Business account.
[Learn more about HCP Terraform pricing here](https://www.hashicorp.com/products/terraform/pricing).

## Example Usage

In this example, the agent pool and workspace are connected through other resources that manage the agent pool permissions as well as the workspace execution mode. Notice that the `TfeWorkspaceSettings` uses the agent pool reference found in `TfeAgentPoolAllowedWorkspaces` in order to create the permission to use the agent pool before assigning it.

```go
import constructs "github.com/aws/constructs-go/constructs"
import "github.com/hashicorp/terraform-cdk-go/cdktf"
/*Provider bindings are generated by running cdktf get.
See https://cdk.tf/provider-generation for more details.*/
import "github.com/aws-samples/dummy/gen/providers/tfe/organization"
import "github.com/aws-samples/dummy/gen/providers/tfe/workspace"
import "github.com/aws-samples/dummy/gen/providers/tfe/agentPool"
import "github.com/aws-samples/dummy/gen/providers/tfe/agentPoolAllowedWorkspaces"
import "github.com/aws-samples/dummy/gen/providers/tfe/workspaceSettings"
type myConvertedCode struct {
	terraformStack
}

func newMyConvertedCode(scope construct, name *string) *myConvertedCode {
	this := &myConvertedCode{}
	cdktf.NewTerraformStack_Override(this, scope, name)
	tfeOrganizationTestOrganization := organization.NewOrganization(this, jsii.String("test-organization"), &organizationConfig{
		email: jsii.String("admin@company.com"),
		name: jsii.String("my-org-name"),
	})
	tfeWorkspaceTestWorkspace := workspace.NewWorkspace(this, jsii.String("test-workspace"), &workspaceConfig{
		name: jsii.String("my-workspace-name"),
		organization: cdktf.Token_AsString(tfeOrganizationTestOrganization.name),
	})
	tfeAgentPoolTestAgentPool := agentPool.NewAgentPool(this, jsii.String("test-agent-pool"), &agentPoolConfig{
		name: jsii.String("my-agent-pool-name"),
		organization: cdktf.Token_*AsString(tfeOrganizationTestOrganization.name),
		organizationScoped: jsii.Boolean(false),
	})
	tfeAgentPoolAllowedWorkspacesAllowed :=
	agentPoolAllowedWorkspaces.NewAgentPoolAllowedWorkspaces(this, jsii.String("allowed"), &agentPoolAllowedWorkspacesConfig{
		agentPoolId: cdktf.Token_*AsString(tfeAgentPoolTestAgentPool.id),
		allowedWorkspaceIds: []*string{
			cdktf.Token_*AsString(tfeWorkspaceTestWorkspace.id),
		},
	})
	workspaceSettings.NewWorkspaceSettings(this, jsii.String("test-workspace-settings"), &workspaceSettingsConfig{
		agentPoolId: cdktf.Token_*AsString(tfeAgentPoolAllowedWorkspacesAllowed.id),
		executionMode: jsii.String("agent"),
		workspaceId: cdktf.Token_*AsString(tfeWorkspaceTestWorkspace.id),
	})
	return this
}
```

## Argument Reference

The following arguments are supported:

* `AgentPoolId` - (Required) The ID of the agent pool.
* `AllowedWorkspaceIds` - (Required) IDs of workspaces to be added as allowed workspaces on the agent pool.


## Import

A resource can be imported; use `<AGENT POOL ID>` as the import ID. For example:

```shell
terraform import tfe_agent_pool_allowed_workspaces.foobar apool-rW0KoLSlnuNb5adB
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-3c5ea53d912d7e5791e5aa07bbc7d490cc3e015ca39df9eaa3767bdc205fb195 -->